name: Keep Backend Alive

on:
  schedule:
    - cron: "*/5 * * * *"
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest

    steps:
      - name: Ping Backend with Retry
        run: |
          for i in {1..3}; do
            curl -f https://two-factor-authentication-two.vercel.app/api/v1/cron/keep-alive && break
            echo "Retry $i failed..."
            sleep 10
          done
